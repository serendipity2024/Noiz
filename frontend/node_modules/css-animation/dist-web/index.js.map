{"version":3,"file":"index.js","sources":["../../src/Event.js","../../src/classes.js","../../src/index.js"],"sourcesContent":["const START_EVENT_NAME_MAP = {\n  transitionstart: {\n    transition: 'transitionstart',\n    WebkitTransition: 'webkitTransitionStart',\n    MozTransition: 'mozTransitionStart',\n    OTransition: 'oTransitionStart',\n    msTransition: 'MSTransitionStart',\n  },\n\n  animationstart: {\n    animation: 'animationstart',\n    WebkitAnimation: 'webkitAnimationStart',\n    MozAnimation: 'mozAnimationStart',\n    OAnimation: 'oAnimationStart',\n    msAnimation: 'MSAnimationStart',\n  },\n};\n\nconst END_EVENT_NAME_MAP = {\n  transitionend: {\n    transition: 'transitionend',\n    WebkitTransition: 'webkitTransitionEnd',\n    MozTransition: 'mozTransitionEnd',\n    OTransition: 'oTransitionEnd',\n    msTransition: 'MSTransitionEnd',\n  },\n\n  animationend: {\n    animation: 'animationend',\n    WebkitAnimation: 'webkitAnimationEnd',\n    MozAnimation: 'mozAnimationEnd',\n    OAnimation: 'oAnimationEnd',\n    msAnimation: 'MSAnimationEnd',\n  },\n};\n\nconst startEvents = [];\nconst endEvents = [];\n\nfunction detectEvents() {\n  const testEl = document.createElement('div');\n  const style = testEl.style;\n\n  if (!('AnimationEvent' in window)) {\n    delete START_EVENT_NAME_MAP.animationstart.animation;\n    delete END_EVENT_NAME_MAP.animationend.animation;\n  }\n\n  if (!('TransitionEvent' in window)) {\n    delete START_EVENT_NAME_MAP.transitionstart.transition;\n    delete END_EVENT_NAME_MAP.transitionend.transition;\n  }\n\n  function process(EVENT_NAME_MAP, events) {\n    for (const baseEventName in EVENT_NAME_MAP) {\n      if (EVENT_NAME_MAP.hasOwnProperty(baseEventName)) {\n        const baseEvents = EVENT_NAME_MAP[baseEventName];\n        for (const styleName in baseEvents) {\n          if (styleName in style) {\n            events.push(baseEvents[styleName]);\n            break;\n          }\n        }\n      }\n    }\n  }\n\n  process(START_EVENT_NAME_MAP, startEvents);\n  process(END_EVENT_NAME_MAP, endEvents);\n}\n\nif (typeof window !== 'undefined' && typeof document !== 'undefined') {\n  detectEvents();\n}\n\nfunction addEventListener(node, eventName, eventListener) {\n  node.addEventListener(eventName, eventListener, false);\n}\n\nfunction removeEventListener(node, eventName, eventListener) {\n  node.removeEventListener(eventName, eventListener, false);\n}\n\nconst TransitionEvents = {\n  // Start events\n  startEvents,\n\n  addStartEventListener(node, eventListener) {\n    if (startEvents.length === 0) {\n      window.setTimeout(eventListener, 0);\n      return;\n    }\n    startEvents.forEach(startEvent => {\n      addEventListener(node, startEvent, eventListener);\n    });\n  },\n\n  removeStartEventListener(node, eventListener) {\n    if (startEvents.length === 0) {\n      return;\n    }\n    startEvents.forEach(startEvent => {\n      removeEventListener(node, startEvent, eventListener);\n    });\n  },\n\n  // End events\n  endEvents,\n\n  addEndEventListener(node, eventListener) {\n    if (endEvents.length === 0) {\n      window.setTimeout(eventListener, 0);\n      return;\n    }\n    endEvents.forEach(endEvent => {\n      addEventListener(node, endEvent, eventListener);\n    });\n  },\n\n  removeEndEventListener(node, eventListener) {\n    if (endEvents.length === 0) {\n      return;\n    }\n    endEvents.forEach(endEvent => {\n      removeEventListener(node, endEvent, eventListener);\n    });\n  },\n};\n\nexport default TransitionEvents;\n","/**\n * Module dependencies.\n */\n\nfunction index(arr, obj) {\n  if (arr.indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n}\n\n/**\n * Whitespace regexp.\n */\n\nvar re = /\\s+/;\n\n/**\n * toString reference.\n */\n\nvar toString = Object.prototype.toString;\n\n/**\n * Wrap `el` in a `ClassList`.\n *\n * @param {Element} el\n * @return {ClassList}\n * @api public\n */\n\nexport default function(el) {\n  return new ClassList(el);\n}\n\n/**\n * Initialize a new ClassList for `el`.\n *\n * @param {Element} el\n * @api private\n */\n\nfunction ClassList(el) {\n  if (!el || !el.nodeType) {\n    throw new Error('A DOM element reference is required');\n  }\n  this.el = el;\n  this.list = el.classList;\n}\n\n/**\n * Add class `name` if not already present.\n *\n * @param {String} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.add = function(name) {\n  // classList\n  if (this.list) {\n    this.list.add(name);\n    return this;\n  }\n\n  // fallback\n  var arr = this.array();\n  var i = index(arr, name);\n  if (!~i) arr.push(name);\n  this.el.className = arr.join(' ');\n  return this;\n};\n\n/**\n * Remove class `name` when present, or\n * pass a regular expression to remove\n * any which match.\n *\n * @param {String|RegExp} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.remove = function(name) {\n  if ('[object RegExp]' == toString.call(name)) {\n    return this.removeMatching(name);\n  }\n\n  // classList\n  if (this.list) {\n    this.list.remove(name);\n    return this;\n  }\n\n  // fallback\n  var arr = this.array();\n  var i = index(arr, name);\n  if (~i) arr.splice(i, 1);\n  this.el.className = arr.join(' ');\n  return this;\n};\n\n/**\n * Remove all classes matching `re`.\n *\n * @param {RegExp} re\n * @return {ClassList}\n * @api private\n */\n\nClassList.prototype.removeMatching = function(re) {\n  var arr = this.array();\n  for (var i = 0; i < arr.length; i++) {\n    if (re.test(arr[i])) {\n      this.remove(arr[i]);\n    }\n  }\n  return this;\n};\n\n/**\n * Toggle class `name`, can force state via `force`.\n *\n * For browsers that support classList, but do not support `force` yet,\n * the mistake will be detected and corrected.\n *\n * @param {String} name\n * @param {Boolean} force\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.toggle = function(name, force) {\n  // classList\n  if (this.list) {\n    if ('undefined' !== typeof force) {\n      if (force !== this.list.toggle(name, force)) {\n        this.list.toggle(name); // toggle again to correct\n      }\n    } else {\n      this.list.toggle(name);\n    }\n    return this;\n  }\n\n  // fallback\n  if ('undefined' !== typeof force) {\n    if (!force) {\n      this.remove(name);\n    } else {\n      this.add(name);\n    }\n  } else {\n    if (this.has(name)) {\n      this.remove(name);\n    } else {\n      this.add(name);\n    }\n  }\n\n  return this;\n};\n\n/**\n * Return an array of classes.\n *\n * @return {Array}\n * @api public\n */\n\nClassList.prototype.array = function() {\n  var className = this.el.getAttribute('class') || '';\n  var str = className.replace(/^\\s+|\\s+$/g, '');\n  var arr = str.split(re);\n  if ('' === arr[0]) arr.shift();\n  return arr;\n};\n\n/**\n * Check if class `name` is present.\n *\n * @param {String} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.has = ClassList.prototype.contains = function(name) {\n  return this.list ? this.list.contains(name) : !!~index(this.array(), name);\n};\n","import Event from './Event';\nimport classes from './classes';\n\nconst isCssAnimationSupported = Event.endEvents.length !== 0;\nconst capitalPrefixes = [\n  'Webkit',\n  'Moz',\n  'O',\n  // ms is special .... !\n  'ms',\n];\nconst prefixes = [ '-webkit-', '-moz-', '-o-', 'ms-', '' ];\n\nfunction getStyleProperty(node, name) {\n  // old ff need null, https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle\n  const style = window.getComputedStyle(node, null);\n  let ret = '';\n  for (let i = 0; i < prefixes.length; i++) {\n    ret = style.getPropertyValue(prefixes[i] + name);\n    if (ret) {\n      break;\n    }\n  }\n  return ret;\n}\n\nfunction fixBrowserByTimeout(node) {\n  if (isCssAnimationSupported) {\n    const transitionDelay =\n      parseFloat(getStyleProperty(node, 'transition-delay')) || 0;\n    const transitionDuration =\n      parseFloat(getStyleProperty(node, 'transition-duration')) || 0;\n    const animationDelay =\n      parseFloat(getStyleProperty(node, 'animation-delay')) || 0;\n    const animationDuration =\n      parseFloat(getStyleProperty(node, 'animation-duration')) || 0;\n    const time = Math.max(\n      transitionDuration + transitionDelay,\n      animationDuration + animationDelay,\n    );\n    // sometimes, browser bug\n    node.rcEndAnimTimeout = setTimeout(() => {\n      node.rcEndAnimTimeout = null;\n      if (node.rcEndListener) {\n        node.rcEndListener();\n      }\n    }, time * 1000 + 200);\n  }\n}\n\nfunction clearBrowserBugTimeout(node) {\n  if (node.rcEndAnimTimeout) {\n    clearTimeout(node.rcEndAnimTimeout);\n    node.rcEndAnimTimeout = null;\n  }\n}\n\nconst cssAnimation = (node, transitionName, endCallback) => {\n  const nameIsObj = typeof transitionName === 'object';\n  const className = nameIsObj ? transitionName.name : transitionName;\n  const activeClassName = nameIsObj\n    ? transitionName.active\n    : `${transitionName}-active`;\n  let end = endCallback;\n  let start;\n  let active;\n  const nodeClasses = classes(node);\n\n  if (\n    endCallback &&\n    Object.prototype.toString.call(endCallback) === '[object Object]'\n  ) {\n    end = endCallback.end;\n    start = endCallback.start;\n    active = endCallback.active;\n  }\n\n  if (node.rcEndListener) {\n    node.rcEndListener();\n  }\n\n  node.rcEndListener = e => {\n    if (e && e.target !== node) {\n      return;\n    }\n\n    if (node.rcAnimTimeout) {\n      clearTimeout(node.rcAnimTimeout);\n      node.rcAnimTimeout = null;\n    }\n\n    clearBrowserBugTimeout(node);\n\n    nodeClasses.remove(className);\n    nodeClasses.remove(activeClassName);\n\n    Event.removeEndEventListener(node, node.rcEndListener);\n    node.rcEndListener = null;\n\n    // Usually this optional end is used for informing an owner of\n    // a leave animation and telling it to remove the child.\n    if (end) {\n      end();\n    }\n  };\n\n  Event.addEndEventListener(node, node.rcEndListener);\n\n  if (start) {\n    start();\n  }\n  nodeClasses.add(className);\n\n  node.rcAnimTimeout = setTimeout(() => {\n    node.rcAnimTimeout = null;\n    nodeClasses.add(activeClassName);\n    if (active) {\n      setTimeout(active, 0);\n    }\n    fixBrowserByTimeout(node);\n    // 30ms for firefox\n  }, 30);\n\n  return {\n    stop() {\n      if (node.rcEndListener) {\n        node.rcEndListener();\n      }\n    },\n  };\n};\n\ncssAnimation.style = (node, style, callback) => {\n  if (node.rcEndListener) {\n    node.rcEndListener();\n  }\n\n  node.rcEndListener = e => {\n    if (e && e.target !== node) {\n      return;\n    }\n\n    if (node.rcAnimTimeout) {\n      clearTimeout(node.rcAnimTimeout);\n      node.rcAnimTimeout = null;\n    }\n\n    clearBrowserBugTimeout(node);\n\n    Event.removeEndEventListener(node, node.rcEndListener);\n    node.rcEndListener = null;\n\n    // Usually this optional callback is used for informing an owner of\n    // a leave animation and telling it to remove the child.\n    if (callback) {\n      callback();\n    }\n  };\n\n  Event.addEndEventListener(node, node.rcEndListener);\n\n  node.rcAnimTimeout = setTimeout(() => {\n    for (const s in style) {\n      if (style.hasOwnProperty(s)) {\n        node.style[s] = style[s];\n      }\n    }\n    node.rcAnimTimeout = null;\n    fixBrowserByTimeout(node);\n  }, 0);\n};\n\ncssAnimation.setTransition = (node, p, value) => {\n  let property = p;\n  let v = value;\n  if (value === undefined) {\n    v = property;\n    property = '';\n  }\n  property = property || '';\n  capitalPrefixes.forEach(prefix => {\n    node.style[`${prefix}Transition${property}`] = v;\n  });\n};\n\ncssAnimation.isCssAnimationSupported = isCssAnimationSupported;\n\nexport { isCssAnimationSupported, Event };\n\nexport default cssAnimation;\n"],"names":["START_EVENT_NAME_MAP","transitionstart","transition","WebkitTransition","MozTransition","OTransition","msTransition","animationstart","animation","WebkitAnimation","MozAnimation","OAnimation","msAnimation","END_EVENT_NAME_MAP","transitionend","animationend","startEvents","endEvents","detectEvents","testEl","document","createElement","style","window","process","EVENT_NAME_MAP","events","baseEventName","hasOwnProperty","baseEvents","styleName","push","addEventListener","node","eventName","eventListener","removeEventListener","TransitionEvents","addStartEventListener","length","setTimeout","forEach","startEvent","removeStartEventListener","addEndEventListener","endEvent","removeEndEventListener","index","arr","obj","indexOf","i","re","toString","Object","prototype","el","ClassList","nodeType","Error","list","classList","add","name","array","className","join","remove","call","removeMatching","splice","test","toggle","force","has","getAttribute","str","replace","split","shift","contains","isCssAnimationSupported","Event","capitalPrefixes","prefixes","getStyleProperty","getComputedStyle","ret","getPropertyValue","fixBrowserByTimeout","transitionDelay","parseFloat","transitionDuration","animationDelay","animationDuration","time","Math","max","rcEndAnimTimeout","rcEndListener","clearBrowserBugTimeout","clearTimeout","cssAnimation","transitionName","endCallback","nameIsObj","activeClassName","active","end","start","nodeClasses","classes","e","target","rcAnimTimeout","stop","callback","s","setTransition","p","value","property","v","undefined","prefix"],"mappings":"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"}